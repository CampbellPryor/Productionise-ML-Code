# Productionising ML Code
This project takes a Jupyter Notebook and turns it into more production ready code. 

The notebook is available here: https://github.com/aws/amazon-sagemaker-examples/blob/fd6fbb103d8861fbea7722d7b093c07a7f94cf1f/introduction_to_applying_machine_learning/xgboost_customer_churn/xgboost_customer_churn.ipynb

There is an associated blog post available at: #TODO add link once published

## To Run the Code
To run the code
1. Install pipenv by running `pip install pipenv` in a terminal
2. Install packages from the Pipfile by running `pipenv install`
3. You will need to configure AWS credentials in your local environment by following the instructions here: https://boto3.amazonaws.com/v1/documentation/api/latest/guide/quickstart.html#configuration
4. Follow the instructions at the following link to create an ARN for Sagemaker: {https://docs.aws.amazon.com/sagemaker/latest/dg/sagemaker-roles.html}
5. Export that ARN to your environment by running: `export sagemaker_arn=AmazonSageMaker-ExecutionRole-123456789`, replacing `AmazonSageMaker-ExecutionRole-123456789` with your ARN
6. Create a bucket to save your results to in S3 and add the name of the bucket in config/config.yaml and in tests/assets/config.yaml, replacing what is currently "my-example-bucket-128581273975"
7. Run unit tests by running `pytest tests/unit_tests`
8. Run integration tests by running `pytest tests/integration_tests`
9. Run pipelines by running `pipenv run python -m src.pipelines.train_and_evaluate --config_path "config/config.yaml" --env "DEV"`


## Code Overview
- src/ contains source code for the program
  - src/pipelines contain the higher level pipeline definitions that run a job from start to finish
  - src/steps contain the functions that make up the steps of the pipeline
  - src/helpers contain the functionality that is needed for various parts of each step
- config/config.yaml contains parameters that are used by the application.
- tests/ contains tests that are run to ensure the functionality of the code is as expected. This folder is automatically detected by pytest
  - tests/assets/ contains assets that are used by tests
  - tests/integration_tests/ contains integration tests 
  - tests/unit_tests contains unit tests
- Pipfile defines the packages to install with pipenv
- Pipfile.lock defines the specific versions of each package that are installed. This is generated by pipenv